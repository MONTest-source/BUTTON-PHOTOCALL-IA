<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Captura y escanea el QR de forma f√°cil y r√°pida">
    <meta name="keywords" content="Photocall, QR, Captura, Escaneo, F√°cil, R√°pido">
    <meta name="MappingON" content="Photocall">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="google" content="notranslate">
    <title>Photocall IA ‚Äì Captura y QR</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="pia-favicon.ico">
    <link rel="shortcut icon" href="pia-favicon.ico">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- HEADER -->
        <header class="header" role="banner">
            <div class="logo-mon" aria-hidden="true">
                <img src="logo.png" alt="MON Mapping ON" class="logo-mon-img">
            </div>
            <div class="header-content">
                <h1>Photocall IA</h1>
                <p class="subtitle">Pulsa CAPTURAR, espera 5s y escanea el QR</p>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="main-content" role="main">
            <div class="content-card">
                <!-- STATE: IDLE -->
                <div class="state-idle" id="state-idle" role="region" aria-label="Estado inicial">
                    <button class="btn-primary" id="capture-btn" aria-label="Iniciar captura de foto">
                        <div class="particles" id="particles-container"></div>
                        <div class="btn-content">
                            <div class="btn-text">CAPTURAR</div>
                            <div class="btn-icon" aria-hidden="true">üì∏</div>
                        </div>
                    </button>
                    <p class="note-text note-text-spaced" aria-live="polite">
                        La descarga se har√° mediante un c√≥digo QR.
                    </p>
                </div>

                <!-- STATE: COUNTDOWN (dentro del bot√≥n) -->
                <div class="state-countdown hidden" id="state-countdown" role="region" aria-label="Cuenta atr√°s">
                    <button class="btn-primary" disabled aria-label="Captura en progreso">
                        <div class="btn-content">
                            <div class="btn-countdown" id="countdown-display" 
                                 role="timer" 
                                 aria-live="assertive" 
                                 aria-atomic="true"
                                 aria-label="Cuenta atr√°s en segundos">
                                5
                            </div>
                            <p class="btn-message" id="countdown-message" aria-live="polite">
                                Mant√©n la pose, no te muevas, pronto se capturar√° tu foto‚Ä¶
                            </p>
                            <div class="loading-spinner" id="loading-spinner" role="status" aria-label="Cargando imagen">
                                <div class="spinner-ring"></div>
                                <div class="spinner-ring"></div>
                                <div class="spinner-ring"></div>
                            </div>
                        </div>
                    </button>
                </div>

                <!-- STATE: READY (dentro del bot√≥n) -->
                <div class="state-ready hidden" id="state-ready" role="region" aria-label="Foto lista">
                    <button class="btn-primary" disabled aria-label="QR listo">
                        <div class="btn-content">
                            <div class="btn-qr-title">¬°Tu foto est√° lista!</div>
                            <div class="btn-qr-container">
                                <img id="qr-code-img" 
                                     alt="C√≥digo QR para descargar tu foto. Escanea con tu m√≥vil para acceder a la descarga."
                                     role="img"
                                     aria-label="C√≥digo QR de descarga">
                            </div>
                            <p class="btn-message">
                                Escanea el QR para descargar tu foto.
                            </p>
                        </div>
                    </button>
                </div>

                <!-- STATE: ERROR -->
                <div class="state-error hidden" id="state-error" role="alert">
                    <div class="error-icon" aria-hidden="true">‚ö†Ô∏è</div>
                    <p class="error-message">
                        Ha ocurrido un error inesperado.
                    </p>
                    <button class="btn-primary" id="retry-btn" aria-label="Reintentar captura">
                        Reintentar
                    </button>
                </div>
            </div>
        </main>

        <!-- FOOTER -->
        <footer class="footer" role="contentinfo">
            <p class="footer-text">
                Tus datos no se almacenan m√°s all√° del evento. Solicita borrado si lo necesitas.
            </p>
        </footer>
    </div>

    <!-- TOAST CONTAINER -->
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <!-- Canvas para animaci√≥n de olas -->
    <canvas id="waves-canvas"></canvas>

    <!-- Elementos para animaci√≥n de reinicio -->
    <div class="reset-overlay" id="reset-overlay"></div>
    <div class="reset-circle" id="reset-circle"></div>
    <div class="reset-sweep" id="reset-sweep"></div>
    <div class="reset-message" id="reset-message">REINICIANDO...</div>

    <script src="app.js"></script>
</body>
</html>
